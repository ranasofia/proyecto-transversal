<div class="detalle-hotel-container">
  <h1>BIENVENIDO A OCCIBANA</h1>

  <section class="detalle-hotel">
    <div class="detalle-container" fxLayoutAlign="center center">
      <mat-card class="detalle-hotel-card">
        <mat-card-header fxLayout="row" fxLayoutAlign="center center">
          <div>
            <mat-card-title>{{ hotelSeleccionado?.nombre }}</mat-card-title>
            <strong>Calificación promedio:</strong>
            <br />
            <ngb-rating [(rate)]="hotelSeleccionado.promediocalificacion">
              <ng-template let-fill="fill" let-index="index">
                <span class="star" [class.filled]="fill === 100">&#9733;</span>
              </ng-template>
            </ngb-rating>
          </div>

          <p class="hoteles-card-img">
            <img mat-card-image src="{{ hotelSeleccionado?.imagen }}" />
          </p>
        </mat-card-header>
        <mat-card-content fxLayoutAlign="center">
          <ul>
            <li>
              <strong>Municipio:</strong> {{ hotelSeleccionado?.municipio }}
            </li>

            <li><strong>Zona:</strong> {{ hotelSeleccionado?.zona }}</li>

            <li>
              <strong>Precio noche básico: COP </strong
              >{{ hotelSeleccionado?.precionoche }}
            </li>

            <li>
              <strong>Precio noche doble: COP</strong>
              {{ hotelSeleccionado?.precioNocheDoble }}
            </li>

            <li>
              <strong>Precio noche premium: COP</strong>
              {{ hotelSeleccionado?.precioNochePremium }}
            </li>

            <li>
              <strong>Dirección:</strong> {{ hotelSeleccionado?.direccion }}
            </li>

            <li>
              <strong>Descripción y servicios:</strong>
              {{ hotelSeleccionado?.descripcion }}
            </li>

            <li>
              <strong>Condiciones físicas:</strong>
              {{ hotelSeleccionado?.condicion }}
            </li>

            <li><strong>HORARIOS DE REGISTRO</strong></li>

            <li>
              <strong>Check-out:</strong> {{ hotelSeleccionado?.checkout }}
            </li>

            <li><strong>Check-in:</strong> {{ hotelSeleccionado?.checkin }}</li>

            <li>
              <strong> Habitaciones disponibles:</strong>
              {{ hotelSeleccionado?.numHabitDisponibles }}
            </li>
          </ul>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <section class="panel-detalle-hotel" fxLayoutAlign="center center">
    <mat-tab-group>
      <mat-tab label="Descripción y Reservas">
        <h2>¡Que esperas para reservar tu hotel en este instante!</h2>
        <h3>Habitaciones disponibles:</h3>
        <ng-container *ngFor="let habitacion of habitaciones">
          <mat-accordion class="seccion-reservas" multi>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title class="title">
                  {{ habitacion.tipo }}
                </mat-panel-title>
                <mat-panel-description>
                  <mat-icon>local_hotel</mat-icon>
                </mat-panel-description>
              </mat-expansion-panel-header>

              <div class="ver-habitaciones" fxLayout="row">
                <p>
                  <strong>Número de personas:</strong>
                  {{ habitacion.numpersonas }}
                </p>
                <p>
                  <strong>Número de camas:</strong> {{ habitacion.numcamas }}
                </p>
                <p>
                  <strong>Baños por habitación:</strong>
                  {{ habitacion.numbanio }}
                </p>
                <p>
                  <strong>Precio por noche: COP</strong> {{ habitacion.precio }}
                </p>

                <button
                  mat-flat-button
                  color="warn"
                  [routerLink]="[
                    '/occibana/hoteles/reservaHabitacion',
                    habitacion.id
                  ]"
                >
                  ¡RESERVAR AHORA!
                </button>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </ng-container>
      </mat-tab>

      <mat-tab label="Puntuar y Comentar">
        <h2>{{ hotelSeleccionado?.nombre }}</h2>

        <div class="seccion-comentar" fxLayout="column">
          <h3>{{ nombreUsuario }} déjanos tu calificación:</h3>
          <mat-slider
            thumbLabel
            [(ngModel)]="value"
            tickInterval="1"
            step="1"
            min="1"
            max="5"
            aria-label="units"
          ></mat-slider>

          <ngb-rating [(rate)]="value">
            <ng-template let-fill="fill" let-index="index">
              <span class="star" [class.filled]="fill === 100">&#9733;</span>
            </ng-template>
          </ngb-rating>

          <br />

          <form
            [formGroup]="comentarioF"
            (ngSubmit)="comentarYcalificar($event)"
          >
            <h3>{{ nombreUsuario }} déjanos tu opinión:</h3>

            <mat-form-field class="comentario-full-width">
              <textarea
                matInput
                type="text"
                required
                formControlName="comentario"
                placeholder="Escribe aquí..."
              >
              </textarea>
              <mat-error
                *ngIf="comentarioF.controls.comentario.hasError('required')"
              >
                Este campo es<strong> obligatorio</strong>
              </mat-error>
            </mat-form-field>
            <br />
            <button mat-flat-button color="primary">ENVIAR</button>
          </form>
        </div>
      </mat-tab>

      <mat-tab label="Comentarios">
        <h2>{{ hotelSeleccionado?.nombre }}</h2>
        <h3>Comentarios recientes</h3>
        <ng-container *ngFor="let comentario of comentarios">
          <mat-accordion class="seccion-comentarios" multi>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  {{ comentario.nombre_usuario }}
                </mat-panel-title>
                <mat-panel-description>
                  <mat-icon>comment</mat-icon>
                </mat-panel-description>
              </mat-expansion-panel-header>

              <p>{{ comentario.fecha_comentario }}</p>
              <p>{{ comentario.comentario }}</p>
            </mat-expansion-panel>
          </mat-accordion>
        </ng-container>
      </mat-tab>
    </mat-tab-group>
  </section>
</div>

<router-outlet></router-outlet>
